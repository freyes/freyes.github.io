<!DOCTYPE html>
<html lang="en">
<head>
        <title>Felipe Reyes</title>
        <!-- Fonts -->
        <link href='http://fonts.googleapis.com/css?family=Inconsolata' rel='stylesheet' type='text/css'>
        <link href='http://fonts.googleapis.com/css?family=The+Girl+Next+Door' rel='stylesheet' type='text/css'>
        <link href='http://fonts.googleapis.com/css?family=Marcellus' rel='stylesheet' type='text/css'>
        
        <!-- CSS -->
        <link rel="stylesheet" href="http://freyes.github.io/theme/css/main.css" type="text/css" />
        <link rel="stylesheet" href="http://freyes.github.io/theme/css/pygments.css" type="text/css" />
        <link rel="stylesheet" href="http://freyes.github.io/theme/css/font-awesome.css" type="text/css" />
        <meta charset="utf-8" />
      

        <!-- Javascript-->
        <script async src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
        <script async type="text/javascript"> 
        $(function() {
            function invisibleMenu() {
                var now = 0;
                var pixels = 300;
                var opacity = -1;

                var move = function() {
                    now = $(window).scrollTop();
                    if (now > pixels && opacity !== 0)
                        opacity = 0;
                    else if (now < pixels){
                        // Depends on the position not if scrolls down or up
                        opacity = (1 - now/pixels);
                    }
                    $("div.navigation").css({"opacity": opacity});
                }
                $(window).scroll(move);
                move();
            }
            invisibleMenu();
          });
          </script> 
</head>

<body id="index" class="home">
     <div class="navigation">
        <ol class="nav">
          <li class="current"><a href="http://freyes.github.io">Blog</a> </li>
          <li><a href="http://freyes.github.io/archives.html">Archive</a></li>
          <li><a href="http://freyes.github.io/tags.html">Tags</a> </li>
          <li><a href="">RSS</a> </li>
        </ol>
      </div>
        <header id="banner" class="body">
                <div class="banner"><a href="http://freyes.github.io">Felipe Reyes <strong></strong></a></div>
        </header><!-- /#banner -->
        <nav id="menu"><ul>
            <li><a href="http://freyes.github.io/pages/c-snippets.html">C Snippets</a></li>
            <li><a href="http://freyes.github.io/pages/python-snippets.html">Python Snippets</a></li>
        </ul></nav><!-- /#menu -->
        <div class="box">
<section id="content" class="body">
  <header class="post">
    <h1 class="entry-title">
      Postgresql Tips n' Tricks
    </h1>
  </header>
  <footer class="post-info">
    <abbr>
      Fri 22 November 2013 
         By <a class="url fn" href="http://freyes.github.io/author/felipe-reyes.html">Felipe Reyes</a>
  
    </abbr>
  </footer><!-- /.post-info -->
  <div class="entry-content">
    <ul class="simple">
<li>pg_stat_activity</li>
</ul>
<p><a class="reference external" href="http://www.postgresql.org/docs/current/static/monitoring-stats.html">pg_stat_activity</a>
is a view that belongs to the postgresql catalog, it helps you to view the
status of the queries that are in execution, the explanation of each column
can be found in the postgresql manual <a class="reference external" href="http://www.postgresql.org/docs/current/static/monitoring-stats.html">The Statistics Collector</a>
section (I don't want to do a simply copy-paste, so see the official documentation).</p>
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="49%" />
<col width="21%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Column</th>
<th class="head">Type</th>
<th class="head">Modifiers</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>datid</td>
<td>oid</td>
<td>&nbsp;</td>
</tr>
<tr><td>datname</td>
<td>name</td>
<td>&nbsp;</td>
</tr>
<tr><td>procpid</td>
<td>integer</td>
<td>&nbsp;</td>
</tr>
<tr><td>usesysid</td>
<td>oid</td>
<td>&nbsp;</td>
</tr>
<tr><td>usename</td>
<td>name</td>
<td>&nbsp;</td>
</tr>
<tr><td>current_query</td>
<td>text</td>
<td>&nbsp;</td>
</tr>
<tr><td>waiting</td>
<td>boolean</td>
<td>&nbsp;</td>
</tr>
<tr><td>xact_start</td>
<td>timestamp with time zone</td>
<td>&nbsp;</td>
</tr>
<tr><td>query_start</td>
<td>timestamp with time zone</td>
<td>&nbsp;</td>
</tr>
<tr><td>backend_start</td>
<td>timestamp with time zone</td>
<td>&nbsp;</td>
</tr>
<tr><td>client_addr</td>
<td>inet</td>
<td>&nbsp;</td>
</tr>
<tr><td>client_port</td>
<td>integer</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">pg_stat_activity</span><span class="p">;</span>
</pre></div>
<ul>
<li><p class="first">If you want to view the queries that are stuck (usually due to a lock or simply waiting for I/O) you can execute the following query:</p>
<div class="highlight"><pre><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">pg_stat_activity</span> <span class="k">WHERE</span> <span class="n">waiting</span> <span class="o">=</span> <span class="k">TRUE</span><span class="p">;</span>
</pre></div>
</li>
</ul>

  </div><!-- /.entry-content -->
</section>
            <hr/>
            <footer id="contentinfo" class="footer">
                <div>
                    <a href="http://freyes.github.io">Felipe Reyes</a> (2012)
                </div>
                <div>
                    This work is licensed under <a rel="license" href="http://opensource.org/licenses/bsd-3-clause">3 clause BSD</a>. Source code available on <a rel="source code" href="https://github.com/slok/blog">Github</a>
                </div>
                <div>
                    powered by <a href="http://getpelican.com/">Pelican</a>
                    and <a href="http://python.org">Python</a>. 
                    <a href="http://github.com/slok/iris">Theme</a> by <a href="http://xlarrakoetxea.org">Xabier Larrakoetxea</a> based on <a href="http://flask.pocoo.org/">Flask</a> theme
                </div>
                <div>
                    Social icons (font awesome) by <a href="http://fortawesome.github.com/Font-Awesome/"> fort awesome</a>.
                    <a href="http://www.google.com/webfonts/specimen/The+Girl+Next+Door">Title</a>, <a href="http://www.google.com/webfonts/specimen/Marcellus">headers</a> and <a href="http://www.google.com/webfonts/specimen/Inconsolata">source code</a> fonts by google fonts
                </div>
                <div class="social">
                        <a href="http://www.metaklass.org/"><i class="icon-@niedbalski"></i>  </a>
                        <a href="http://monkey-project.com/"><i class="icon-Monkey Project"></i>  </a>
                        <a href="mailto:freyes@tty.cl"><i class="icon-envelope"></i> </a>
                </div>
            </footer><!-- /#contentinfo -->
        </div>
        <!--Add statistycs-->
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', "UA-2675698-3"]);
_gaq.push(['_setDomainName', "freyes.github.io"]);  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

</body>
</html>